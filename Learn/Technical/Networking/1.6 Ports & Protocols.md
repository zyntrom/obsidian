# ðŸ”¥ **1.6 Ports & Protocols â€” FULL DETAILED BREAKDOWN**

## ðŸŸ¦ What is a Port?

A **port** is a _logical door_ on a device that a service listens on.

- IP address = _house address_
- Port number = _specific room inside the house_

Example:

```
192.168.1.10:22  â†’ SSH server 
192.168.1.10:443 â†’ HTTPS website
```

Ports range from **0 to 65535**.

---

# ðŸŸ¨ Port Categories

|Range|Type|Meaning|
|---|---|---|
|0â€“1023|**Well-known ports**|Assigned by IANA (HTTP, SSH, etc.)|
|1024â€“49151|**Registered ports**|Apps/services may register|
|49152â€“65535|**Dynamic/private ports**|Used by clients (temporary ports)|

Example:  
Your browser connecting to `google.com:443` uses a random dynamic port like:

```
Your PC: 192.168.1.10:53142 â†’ Google:443
```

---

# ðŸŸ¦ Common Ports & Protocols â€” FULL DETAILS

---

## ðŸ”¹ **HTTP â€” Port 80**

- Handles **web traffic (unencrypted)**
- Data is visible in plaintext

### Example:

```
http://example.com â†’ all traffic readable
```

### Attack:

- **Password sniffing**
- **Session hijacking**
- **Man-in-the-middle**

---

## ðŸ”¹ **HTTPS â€” Port 443**

- HTTP + SSL/TLS encryption
- Cannot be read even if intercepted

### Example:

```
https://bank.com â†’ encrypted
```

### Attack attempt:

- SSL strip (downgrade HTTPS â†’ HTTP)
- Invalid certificate attacks

---

## ðŸ”¹ **FTP â€” Port 21**

- File Transfer Protocol
- **Username/password sent in plaintext**

### Attack:

- Credential sniffing
- Brute force

---

## ðŸ”¹ **SSH â€” Port 22**

- Secure remote shell
- Encrypted communication

### Attack:

- Password brute force
- Exploiting outdated SSH versions

---

## ðŸ”¹ **Telnet â€” Port 23**

- Remote shell (plaintext)

### Attack:

- FULL credential sniffing
- Device takeover

**Telnet should never be used today.**

---

## ðŸ”¹ **SMTP â€” Port 25**

- Sends outgoing emails (Mail servers)

### Attack:

- Open relay abuse
- Spam sending
- Email spoofing

---

## ðŸ”¹ **DNS â€” Port 53**

- Translates **domain â†’ IP**

### Attack:

- DNS spoofing
- DNS cache poisoning
- DNS tunneling (covert data exfiltration)

---

## ðŸ”¹ **DHCP â€” Port 67 (server) / 68 (client)**

- Assigns IP addresses automatically

### Attack:

- Rogue DHCP server
- Attacker gives fake IPs, fake gateway â†’ MitM

---

## ðŸ”¹ **POP3 â€” Port 110**

- Receives emails from server to client
- Plaintext (unless POP3S on port 995)

### Attack:

- Password sniffing
- Session stealing

---

## ðŸ”¹ **SMB â€” Port 445**

- Windows **file sharing**
- Used for:
    - Network drives
    - Printer sharing
    - Remote file access

### Attack:

- EternalBlue exploit (WannaCry)
- SMB relay attacks
- Lateral movement in networks

---

## ðŸ”¹ **RDP â€” Port 3389**

- Windows Remote Desktop

### Attack:

- Credential brute force
- RDP takeover
- BlueKeep exploit

---

# ðŸ”¥ Why Hackers Scan Ports?

**Port scanning = discovering what services are running.**
If a port is open, the service behind it may have vulnerabilities.

### Example:

- Open 22 â†’ target running SSH
- Open 445 â†’ SMB exploit possible
- Open 3389 â†’ maybe weak RDP password
- Open 80/443 â†’ web app attack surface

Ports reveal the **attack surface**.

---

# ðŸŸ¦ Port States (Nmap)

|State|Meaning|
|---|---|
|Open|Service is running & accepting connections|
|Closed|No service, but reachable|
|Filtered|Firewall blocked the probe|
|Unfiltered|Responding but Nmap can't tell open/closed|
|Open\|Filtered|Unknown|

---

# ðŸŸ© Nmap Commands Explained

## âœ” **1. Service Version Detection**

```
nmap -sV <target>
```
This finds:

- Which port is open
- Which service is running
- Which version

### Example Output:

```
22/tcp open  ssh     OpenSSH 7.2p2 
80/tcp open  http    Apache 2.4.41 
445/tcp open  microsoft-ds Windows SMB
```

Now you know **exact versions** â†’ check CVEs.

---

## âœ” **2. Scan ALL 65535 ports**

```
nmap -p- <target>
```

This finds:

- Hidden ports
- Non-standard services
- Unknown custom apps

Example:  
A service may run on port 8080, 9001, 50000.

Missing these = missing vulnerabilities.

---

## âœ” **3. Default Scripts (safe & useful)**

```
nmap -sC <target>
```

Equivalent to:

```
nmap --script=default <target>
```

Runs scripts like:

- Checking SSL certificate expiry
- Enumerating SMB shares
- Default MySQL access
- FTP anonymous login
- HTTP server info gathering

---

# ðŸŸ¥ Full Example: Nmap Scan on a Real Host

Command:

```
nmap -sV -sC -p- 192.168.1.50
```

Result:

```
22/tcp open  ssh       OpenSSH 6.0 
80/tcp open  http      Apache 2.2.3 
445/tcp open  smb      Windows 7 Professional 
3389/tcp open  rdp     Microsoft Terminal Service
```

### What this means for hacking:

- **SSH OpenSSH 6.0** â†’ outdated â†’ known vulnerabilities
- **Apache 2.2.3** â†’ can use directory traversal or buffer overflow exploits
- **SMB open** â†’ EternalBlue possible
- **RDP open** â†’ Credential stuffing & brute force

Nmap is the **first step of any penetration test**.